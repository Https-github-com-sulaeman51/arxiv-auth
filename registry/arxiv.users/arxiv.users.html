
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>arxiv.users package &#8212; arXiv AuthN/Z 0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="arxiv.users.auth package" href="arxiv.users.auth.html" />
    <link rel="prev" title="Architecture" href="../architecture.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-arxiv.users">
<span id="arxiv-users-package"></span><h1>arxiv.users package<a class="headerlink" href="#module-arxiv.users" title="Permalink to this headline">¶</a></h1>
<p>arXiv authentication and authorization tools.</p>
<p>This package provides core functionality for working with users and sessions
in arXiv-NG services. Housing these components in a library (separate from
service implementations) ensures that users and sessions are represented
and manipulated consistently. In addition to NG components, this package
also provides integrations with the legacy user and session data in the
classic database.</p>
<p>The user accounts, API client registry, and authenticator services all rely on
this package for domain representations and integration with the legacy
system.</p>
<div class="section" id="quick-start">
<h2>Quick start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h2>
<p>For typical use-cases, you will need to do the following:</p>
<ol class="arabic simple">
<li>Install this package into your virtual environment.</li>
<li>Install <a class="reference internal" href="arxiv.users.auth.html#arxiv.users.auth.Auth" title="arxiv.users.auth.Auth"><code class="xref py py-class docutils literal notranslate"><span class="pre">arxiv.users.auth.Auth</span></code></a> onto your application. This will make
information about the current authenticated <a class="reference internal" href="arxiv.users.domain.html#arxiv.users.domain.Session" title="arxiv.users.domain.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">domain.Session</span></code></a>
available to you on the Flask request proxy object as
<code class="docutils literal notranslate"><span class="pre">flask.request.session</span></code>.</li>
<li>Install <a class="reference internal" href="arxiv.users.auth.middleware.html#arxiv.users.auth.middleware.AuthMiddleware" title="arxiv.users.auth.middleware.AuthMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">arxiv.users.auth.middleware.AuthMiddleware</span></code></a> onto your
application. Optional (see below).</li>
</ol>
<p>Here’s an example of how you might do #2 and #3:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># yourapp/factory.py</span>
<span class="kn">from</span> <span class="nn">arxiv.base</span> <span class="kn">import</span> <span class="n">Base</span>
<span class="kn">from</span> <span class="nn">arxiv.base.middleware</span> <span class="kn">import</span> <span class="n">wrap</span>
<span class="kn">from</span> <span class="nn">arxiv.users</span> <span class="kn">import</span> <span class="n">auth</span>


<span class="k">def</span> <span class="nf">create_web_app</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Flask</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
    <span class="n">Base</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
    <span class="n">auth</span><span class="o">.</span><span class="n">Auth</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>    <span class="c1"># &lt;- Install the Auth extension.</span>
    <span class="n">wrap</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="p">[</span><span class="n">auth</span><span class="o">.</span><span class="n">middleware</span><span class="o">.</span><span class="n">AuthMiddleware</span><span class="p">])</span>    <span class="c1"># &lt;- Install middleware.</span>
    <span class="k">return</span> <span class="n">app</span>
</pre></div>
</div>
<p>If you are not deplying this application in the cloud behind NGINX (and
therefore will not support sessions from the distributed store), you do not
need the auth middleware (step #3).</p>
</div>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="arxiv.users.auth.html">arxiv.users.auth package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="arxiv.users.auth.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="arxiv.users.auth.sessions.html">arxiv.users.auth.sessions package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="arxiv.users.auth.sessions.html#submodules">Submodules</a><ul>
<li class="toctree-l5"><a class="reference internal" href="arxiv.users.auth.sessions.store.html">arxiv.users.auth.sessions.store module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="arxiv.users.auth.html#submodules">Submodules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="arxiv.users.auth.decorators.html">arxiv.users.auth.decorators module</a></li>
<li class="toctree-l3"><a class="reference internal" href="arxiv.users.auth.exceptions.html">arxiv.users.auth.exceptions module</a></li>
<li class="toctree-l3"><a class="reference internal" href="arxiv.users.auth.middleware.html">arxiv.users.auth.middleware module</a></li>
<li class="toctree-l3"><a class="reference internal" href="arxiv.users.auth.scopes.html">arxiv.users.auth.scopes module</a></li>
<li class="toctree-l3"><a class="reference internal" href="arxiv.users.auth.tokens.html">arxiv.users.auth.tokens module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="arxiv.users.legacy.html">arxiv.users.legacy package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="arxiv.users.legacy.html#submodules">Submodules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="arxiv.users.legacy.accounts.html">arxiv.users.legacy.accounts module</a></li>
<li class="toctree-l3"><a class="reference internal" href="arxiv.users.legacy.authenticate.html">arxiv.users.legacy.authenticate module</a></li>
<li class="toctree-l3"><a class="reference internal" href="arxiv.users.legacy.cookies.html">arxiv.users.legacy.cookies module</a></li>
<li class="toctree-l3"><a class="reference internal" href="arxiv.users.legacy.endorsements.html">arxiv.users.legacy.endorsements module</a></li>
<li class="toctree-l3"><a class="reference internal" href="arxiv.users.legacy.exceptions.html">arxiv.users.legacy.exceptions module</a></li>
<li class="toctree-l3"><a class="reference internal" href="arxiv.users.legacy.models.html">arxiv.users.legacy.models module</a></li>
<li class="toctree-l3"><a class="reference internal" href="arxiv.users.legacy.sessions.html">arxiv.users.legacy.sessions module</a></li>
<li class="toctree-l3"><a class="reference internal" href="arxiv.users.legacy.util.html">arxiv.users.legacy.util module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="arxiv.users.domain.html">arxiv.users.domain module</a></li>
</ul>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">arXiv AuthN/Z</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">arxiv.users package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#quick-start">Quick start</a></li>
<li class="toctree-l2"><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../accounts/accounts.html">Accounts Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authenticator/authenticator.html">authenticator package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../registry/registry.html">registry package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../architecture.html" title="previous chapter">Architecture</a></li>
      <li>Next: <a href="arxiv.users.auth.html" title="next chapter">arxiv.users.auth package</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, arXiv.org.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="../_sources/arxiv.users/arxiv.users.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>